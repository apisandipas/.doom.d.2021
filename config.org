#+TITLE: Planning My Own Doom
#+AUTHOR: Bryan Paronto
#+EMAIL: bryan@cablecar.digital
#+STARTUP: content

* Meta
** TODO
- [-] TODO Configure emacs apps [1/4]
  - [ ] mu4e
  - [ ] emms
  - [ ] eww
  - [X] elfeed
- Configure file paths and templates

 #+begin_src emacs-lisp :tangle yes
(setq user-full-name "Bryan Paronto"
      user-mail-address "bryan@cablcar.digital")
#+end_src

* Appearance
** Typography
*** Set Font
#+begin_src emacs-lisp :tangle yes
(setq doom-font
      (font-spec
            :family "VictorMono Nerd Font" :size 18 :weight 'medium)
      doom-variable-pitch-font
      (font-spec
            :family  "VictorMono Nerd Font" :size 18)
      doom-big-font
      (font-spec
            :family "VictorMono Nerd Font" :size 20))

#+end_src
*** Set Indentation
#+begin_src emacs-lisp :tangle yes
(setq standard-indent 2)
#+end_src

*** Enable Italics and Bold Faces
#+begin_src emacs-lisp :tangle yes

(after! doom-themes
  (setq doom-themes-enable-bold t
        doom-themes-enable-italic t))
(custom-set-faces!
        '(font-lock-comment-face :slant italic)
        '(font-lock-keyword-face :slant italic))

#+end_src
#+begin_src emacs-lisp :tangle yes
(setq prettify-symbols-alist
  (mapcan (lambda (x) (list x (cons (upcase (car x)) (cdr x))))
          '(("#+begin_src" . ?ÔïÖ)
            ("#+end_src" . ?Ô∞µ)
            ("#+begin_example" . ?Ô°ú)
            ("#+end_example" . ?Ô°ü)
            ("#+header:" . ?Ôúø)
            ("#+name:" . ?ÔÆ∏)
            ("#+results:" . ?Ôûö)
            ("#+call:" . ?Ô£±)
            (":properties:" . ?Ôê£)
            (":logbook:" . ?Ôñπ))))
(prettify-symbols-mode)
#+end_src

*** Configure Ligatures
#+begin_src emacs-lisp :tangle yes
(use-package ligature
  :config
  (ligature-set-ligatures
        'prog-mode '("|||>" "<|||" "<==>" "<!--" "####" "~~>" "***" "||=" "||>"
        ":::" "::=" "=:=" "===" "==>" "=!=" "=>>" "=<<" "=/=" "!=="
        "!!." ">=>" ">>=" ">>>" ">>-" ">->" "->>" "-->" "---" "-<<"
        "<~~" "<~>" "<*>" "<||" "<|>" "<$>" "<==" "<=>" "<=<" "<->"
        "<--" "<-<" "<<=" "<<-" "<<<" "<+>" "</>" "###" "#_(" "..<"
        "..." "+++" "/==" "///" "_|_" "www" "&&" "^=" "~~" "~@" "~="
        "~>" "~-" "**" "*>" "*/" "||" "|}" "|]" "|=" "|>" "|-" "{|"
        "[|" "]#" "::" ":=" ":>" ":<" "$>" "==" "=>" "!=" "!!" ">:"
        ">=" ">>" ">-" "-~" "-|" "->" "--" "-<" "<~" "<*" "<|" "<:"
        "<$" "<=" "<>" "<-" "<<" "<+" "</" "#{" "#[" "#:" "#=" "#!"
        "##" "#(" "#?" "#_" "%%" ".=" ".-" ".." ".?" "+>" "++" "?:"
        "?=" "?." "??" ";;" "/*" "/=" "/>" "//" "__" "~~" "(*" "*)"
        "\\\\" "://"))
  (global-ligature-mode t))
#+end_src


** Prefer Vertical Splits
#+begin_src emacs-lisp :tangle yes
(setq split-height-threshold nil)
(setq split-width-threshold 0)
#+end_src
** Icons
#+begin_src emacs-lisp :tangle yes
(use-package all-the-icons-ivy
  :after (all-the-icons ivy)
  :custom (all-the-icons-ivy-buffer-commands '(ivy-switch-buffer-other-window))
  :config
  (add-to-list 'all-the-icons-ivy-file-commands 'counsel-dired-jump)
  (add-to-list 'all-the-icons-ivy-file-commands 'counsel-find-library)
  (all-the-icons-ivy-setup))

(use-package ivy-posframe
  :config
  (setq ivy-posframe-display-functions-alist '((t . ivy-posframe-display-at-frame-center)))
  (ivy-posframe-mode 1))
#+end_src
** Theme Selection
*** Pick a Theme, any theme.
#+begin_src emacs-lisp :tangle yes
;; (setq doom-theme 'doom-one)
;; (setq doom-theme 'one-dark)
(setq doom-theme 'doom-gruvbox-light)
#+end_src

** Dashboard
#+begin_src emacs-lisp :tangle yes

(defun bp/fill-visual-column ()
    (setq visual-fill-column-center-text t
        visual-fill-column-width 100)
    (visual-fill-column-mode 1))

(use-package dashboard
        :init
        (setq dashboard-set-heading-icons t)
        (setq dashboard-set-file-icons t)
        (setq dashboard-week-agenda nil)
        (setq dashboard-startup-banner "~/.doom.d/banners/gnu.png")
        (setq initial-buffer-choice (lambda () (get-buffer "*dashboard*")))
        ;; (add-hook 'window-setup-hook #'treemacs 'append)
        :config
        (dashboard-setup-startup-hook))

(after! visual-fill-column
  (add-hook! dashboard-mode-hook 'bp/fill-visual-column))
#+end_src


** Frame Opacity
#+begin_src emacs-lisp :tangle yes
(set-frame-parameter (selected-frame)'alpha '(75 . 80))
(add-to-list 'default-frame-alist'(alpha . (75 . 80)))
#+end_src

** Relative Line Numbers
#+begin_src emacs-lisp :tangle yes
(setq display-line-numbers-type 'relative)
#+end_src

* Org Mode Config
** Keybinding to tangle files
#+begin_src emacs-lisp :tangle yes
(map! :leader
      :desc "Org babel tangle" "m B" #'org-babel-tangle)
;; Enable superstarmode
(use-package org-superstar
  :config
  (setq org-superstar-item-bullet-alist '((?+ . ?‚û§) (?- . ?‚ú¶))))
(add-hook 'org-mode-hook (lambda () (org-superstar-mode 1)))
#+end_src

** Org Agenda
#+begin_src emacs-lisp :tangle yes
(after! org
  (setq org-agenda-files '("~/org")
        org-directory "~/org/"
        org-ellipsis " ‚ñº "
        org-default-notes-file (expand-file-name
                                "notes.org" org-directory)
        org-log-done 'time
        org-hide-emphasis-markers t))

(use-package org-super-agenda
  :after org-agenda
  :init
  (setq org-agenda-skip-scheduled-if-done t
        org-agenda-skip-deadline-if-done t
        org-agenda-include-deadlines t
        org-super-agenda-header-separator "\n"
        ;; org-agenda-block-separator nil
        ;; org-agenda-compact-blocks nil
        org-agenda-start-day nil
        org-agenda-span 10
        org-super-agenda-hide-empty-groups nil
        org-agenda-start-on-weekday nil)
  (setq org-tag-alist '(("URGENT" . ?u)
                         ("@Health" . ?h)
                         ("@Self" . ?s)
                         ("@Love" . ?l)
                         ("@Home" . ?h)
                         ("@Family" . ?f)
                         ("@Community" . ?c)
                         ("project" . ?P)
                         ("task" . ?T)
                         ("chore" . ?C)
                         ("bill" . ?B)
                         ("appointment" . ?A)
                         ))
  (setq org-todo-keywords
        '((sequence "TODO(t)" "IN-PROGRESS(i)" "BLOCKED(b)" "|" "DONE(d)")
          (type "[ ](c)" "PROJ(p)" "SOMEDAY(s)" "LOOP(r)" "|" "[x](x)")
          (sequence "|" "CANCELLED")))
  (setq org-agenda-custom-commands
        '(
          ("c" "üíé FACETS"
           ((alltodo ""
                ((org-agenda-overriding-header "\n üíé FACETS ")
                (org-super-agenda-groups
                '((:log t)
                    (:name "üè• Health"
                    :tag "@Health"
                    :order 3)
                    (:name "üïπ Self"
                    :tag "@Self"
                    :order 4)
                    (:name "ü´Ç Love"
                    :tag "@Love"
                    :order 5)
                    (:name "üè† Home"
                    :tag "@Home"
                    :order 6)
                    (:name "üè† Home"
                    :tag "@Home"
                    :order 7)
                    (:name "ü§ù Community"
                    :tag "@Community"
                    :order 8)

                    (:discard (:not (:todo "TODO")))))))))

          ("g" "üí™ GTD"
           ((alltodo "" ((org-agenda-overriding-header "\n üí™ GTD ")
                         (org-super-agenda-groups
                          '((:log t)
                            (:name "In Progress"
                             :todo "IN-PROGRESS"
                             :order 1)
                            (:name "Next Up"
                             :todo "NEXT"
                             :scheduled nil
                             :order 2)
                            (:name "Scheduled"
                             :scheduled t
                             :todo t
                             :order 3)
                            (:name "Backlog"
                             :todo "TODO"
                             :scheduled nil
                             :order 4)
                            (:name "Blocked"
                             :todo "BLOCKED"
                             :order 5)
                            (:name "Someday"
                             :todo "SOMEDAY"
                             :order 6)
                            (:name "Repeating Tasks"
                             :todo "LOOP"
                             :scheduled t
                             :order 7)
                            ))))))


          ))
  :config
  (org-super-agenda-mode))
#+end_src

** Org Journal
**** Basic Config
#+begin_src emacs-lisp :tangle yes

(after! org
  (setq org-journal-dir "~/org/journal/"
        org-journal-date-prefix "Ôëï "
        org-journal-time-prefix "Ôôè "
        org-journal-date-format "%B %d, %Y (%A) "
        org-journal-file-format "%Y-%m-%d.org"))
#+end_src

** Center Org Buffer Contents
#+begin_src emacs-lisp :tangle yes
(after! visual-fill-column
  (add-hook! 'org-mode-hook #'bp/fill-visual-column))
#+end_src

** Better Typography
#+begin_src emacs-lisp :tangle yes
(defun bp/org-font-setup ()
  ;; Set faces for heading levels
  (dolist (face '((org-level-1 . 190)
                  (org-level-2 . 180)
                  (org-level-3 . 160)
                  (org-level-4 . 140)
                  (org-level-5 . 120)
                  (org-level-6 . 100)
                  (org-level-7 . 90)
                  (org-level-8 . 80)))
    (set-face-attribute (car face)
        nil :font "VictorMono Nerd Font"
        :weight 'bold
        :height (cdr face))))


(if 'org-mode
    (bp/org-font-setup))

#+end_src

* Key Bindings Config

** Toggle File Tree
#+begin_src emacs-lisp :tangle yes
  (map! :leader
        :desc "Toggle file tree"
        "t t" #'treemacs)
#+end_src

** Toggle Comments
#+begin_src emacs-lisp :tangle yes
(map! :leader
      :desc "Toggle comment"
      "j" #'comment-line)
#+end_src

* RSS Reader Config
#+begin_src emacs-lisp :tangle yes
(use-package! elfeed-goodies)
(elfeed-goodies/setup)
(setq elfeed-goodies/entry-pane-size 0.5)
(add-hook 'elfeed-show-mode-hook 'visual-line-mode)
(evil-define-key 'normal elfeed-show-mode-map
  (kbd "J") 'elfeed-goodies/split-show-next
  (kbd "K") 'elfeed-goodies/split-show-prev)
(evil-define-key 'normal elfeed-search-mode-map
  (kbd "J") 'elfeed-goodies/split-show-next
  (kbd "K") 'elfeed-goodies/split-show-prev)
(setq elfeed-feeds (quote
    (("https://www.reddit.com/r/linux.rss" reddit linux)
    ("https://www.reddit.com/r/unixporn.rss" reddit unixporn)
    ("https://www.reddit.com/r/commandline.rss" reddit commandline)
    ("https://www.reddit.com/r/neovim.rss" reddit neovim)
    ("https://www.reddit.com/r/vim.rss" reddit vim)
    ("https://www.reddit.com/r/distrotube.rss" reddit distrotube)
    ("https://www.reddit.com/r/emacs.rss" reddit emacs)
    ("https://hackaday.com/blog/feed/" hackaday linux)
    ("https://opensource.com/feed" opensource linux)
    ("https://linux.softpedia.com/backend.xml" softpedia linux)
    ("https://itsfoss.com/feed/" itsfoss linux)
    ("https://www.zdnet.com/topic/linux/rss.xml" zdnet linux)
    ("https://distrowatch.com/news/dwd.xml" distrowatch linux))))

#+end_src

#+RESULTS:
#+begin_src emacs-lisp :tangle yes
(use-package prettier-js
  :config
  (add-hook 'js2-mode-hook 'prettier-js-mode)
  (add-hook 'web-mode-hook 'prettier-js-mode)
  (setq prettier-js-args '(
    "--single-quote" "true"
    "--jsx-single-quote" "true"
 )))
#+end_src


#+begin_src emacs-lisp :tangle yes
(defun prefer-horizontal-split ()
  (set-variable 'split-height-threshold nil t)
  (set-variable 'split-width-threshold 40 t)) ; make this as low as needed
(add-hook 'markdown-mode-hook 'prefer-horizontal-split)
(map! :leader
      :desc "Clone indirect buffer other window" "b c" #'clone-indirect-buffer-other-window)
#+end_src


